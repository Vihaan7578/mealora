<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Progress Tracker - Mealora</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Background Orbs -->
    <div class="bg-orbs">
        <div class="orb orb-1"></div>
        <div class="orb orb-2"></div>
        <div class="orb orb-3"></div>
    </div>

    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="index.html" class="nav-logo">
                <span>🌿</span>
                <span>Mealora</span>
            </a>
            <ul class="nav-links">
                <li><a href="index.html">Home</a></li>
                <li><a href="planner.html">Meal Planner</a></li>
                <li><a href="grocery.html">Grocery List</a></li>
                <li><a href="saved.html">Saved Plans</a></li>
                <li><a href="progress.html" class="active">Progress</a></li>
                <li><a href="recipes.html">Recipes</a></li>
            </ul>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container">
        <div style="text-align: center; margin-bottom: 3rem;">
            <h1 style="font-size: 3rem; font-weight: 900; margin-bottom: 0.5rem;" class="gradient-text">
                📈 Progress Tracker
            </h1>
            <p style="font-size: 1.25rem; color: var(--gray-600);">
                Track your health journey over time
            </p>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 2fr; gap: 2rem; margin-bottom: 2rem;">
            <!-- Left Panel - Log Progress -->
            <div class="glass" style="padding: 2rem; border-radius: 1.5rem;">
                <h2 style="font-size: 1.5rem; font-weight: 700; margin-bottom: 1.5rem; color: var(--gray-900);">
                    Log Your Progress
                </h2>
                
                <div style="margin-bottom: 1.5rem;">
                    <label style="display: block; font-weight: 700; color: var(--gray-700); margin-bottom: 0.5rem;">Current Weight (kg)</label>
                    <input type="number" id="weight" placeholder="e.g., 70" step="0.1"
                           style="width: 100%; padding: 0.75rem; border-radius: 0.75rem; border: 2px solid var(--gray-200); font-size: 1rem;">
                </div>

                <div style="margin-bottom: 1.5rem;">
                    <label style="display: block; font-weight: 700; color: var(--gray-700); margin-bottom: 0.5rem;">Target Weight (kg)</label>
                    <input type="number" id="targetWeight" placeholder="e.g., 65" step="0.1"
                           style="width: 100%; padding: 0.75rem; border-radius: 0.75rem; border: 2px solid var(--gray-200); font-size: 1rem;">
                </div>

                <div style="margin-bottom: 1.5rem;">
                    <label style="display: block; font-weight: 700; color: var(--gray-700); margin-bottom: 0.5rem;">Energy Level (1-10)</label>
                    <input type="range" id="energy" min="1" max="10" value="5"
                           oninput="document.getElementById('energyValue').textContent = this.value"
                           style="width: 100%;">
                    <div style="text-align: center; margin-top: 0.5rem; font-weight: 700; color: var(--primary); font-size: 1.25rem;">
                        <span id="energyValue">5</span>/10
                    </div>
                </div>

                <div style="margin-bottom: 2rem;">
                    <label style="display: block; font-weight: 700; color: var(--gray-700); margin-bottom: 0.5rem;">Notes (Optional)</label>
                    <textarea id="notes" placeholder="How are you feeling today?" rows="3"
                              style="width: 100%; padding: 0.75rem; border-radius: 0.75rem; border: 2px solid var(--gray-200); font-size: 1rem; resize: none;"></textarea>
                </div>

                <button onclick="logProgress()" class="btn btn-primary" style="width: 100%; justify-content: center; padding: 1rem;">
                    💾 Save Progress
                </button>
            </div>

            <!-- Right Panel - Charts -->
            <div class="glass" style="padding: 2rem; border-radius: 1.5rem;">
                <h2 style="font-size: 1.5rem; font-weight: 700; margin-bottom: 1.5rem; color: var(--gray-900);">
                    Your Journey
                </h2>
                
                <div id="chartContainer" style="margin-bottom: 2rem;">
                    <canvas id="weightChart" style="max-height: 400px;"></canvas>
                </div>

                <div id="statsGrid" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem;">
                    <!-- Stats will be populated here -->
                </div>
            </div>
        </div>

        <!-- Progress History -->
        <div class="glass" style="padding: 2rem; border-radius: 1.5rem;">
            <h2 style="font-size: 1.5rem; font-weight: 700; margin-bottom: 1.5rem; color: var(--gray-900);">
                Recent Entries
            </h2>
            <div id="progressHistory"></div>
        </div>
    </div>

    <script src="app.js"></script>
    <script>
        setActivePage('progress.html');
        let weightChart = null;

        function logProgress() {
            const weight = document.getElementById('weight').value;
            const targetWeight = document.getElementById('targetWeight').value;
            const energy = document.getElementById('energy').value;
            const notes = document.getElementById('notes').value;

            if (!weight || !targetWeight) {
                showNotification('Please enter both current and target weight', 'error');
                return;
            }

            saveProgress({
                weight: parseFloat(weight),
                targetWeight: parseFloat(targetWeight),
                energy: parseInt(energy),
                notes
            });

            showNotification('✅ Progress logged successfully!', 'success');
            
            // Clear form
            document.getElementById('weight').value = '';
            document.getElementById('notes').value = '';
            
            // Refresh display
            updateChart();
            displayHistory();
            updateStats();
        }

        function updateChart() {
            const progress = getProgress();
            
            if (progress.length === 0) {
                document.getElementById('chartContainer').innerHTML = `
                    <div style="text-align: center; padding: 4rem;">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">📊</div>
                        <p style="color: var(--gray-600);">Log your first entry to see the chart</p>
                    </div>
                `;
                return;
            }

            const ctx = document.getElementById('weightChart');
            
            if (weightChart) {
                weightChart.destroy();
            }

            const labels = progress.map(p => new Date(p.date).toLocaleDateString());
            const weights = progress.map(p => p.weight);
            const targets = progress.map(p => p.targetWeight);

            weightChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Current Weight',
                        data: weights,
                        borderColor: 'rgb(0, 230, 160)',
                        backgroundColor: 'rgba(0, 230, 160, 0.1)',
                        tension: 0.4,
                        fill: true
                    }, {
                        label: 'Target Weight',
                        data: targets,
                        borderColor: 'rgb(99, 102, 241)',
                        borderDash: [5, 5],
                        tension: 0
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        title: {
                            display: true,
                            text: 'Weight Progress Over Time'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false
                        }
                    }
                }
            });
        }

        function displayHistory() {
            const progress = getProgress().reverse();
            const container = document.getElementById('progressHistory');
            
            if (progress.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 3rem; color: var(--gray-600);">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">📋</div>
                        <p>No entries yet. Start logging your progress!</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = progress.slice(0, 5).map(entry => `
                <div style="background: white; padding: 1.5rem; border-radius: 0.75rem; margin-bottom: 1rem; border-left: 4px solid var(--primary);">
                    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                        <div>
                            <div style="font-weight: 700; color: var(--gray-900); font-size: 1.125rem; margin-bottom: 0.25rem;">
                                ${entry.weight} kg
                            </div>
                            <div style="font-size: 0.875rem; color: var(--gray-600);">
                                ${new Date(entry.date).toLocaleString()}
                            </div>
                        </div>
                        <div style="text-align: right;">
                            <div style="font-size: 0.75rem; color: var(--gray-600); text-transform: uppercase; margin-bottom: 0.25rem;">Energy</div>
                            <div style="font-weight: 700; color: var(--primary);">${entry.energy}/10</div>
                        </div>
                    </div>
                    ${entry.notes ? `<div style="color: var(--gray-600); font-size: 0.875rem; font-style: italic;">📝 ${entry.notes}</div>` : ''}
                </div>
            `).join('');
        }

        function updateStats() {
            const progress = getProgress();
            const container = document.getElementById('statsGrid');
            
            if (progress.length === 0) {
                container.innerHTML = '';
                return;
            }

            const latest = progress[progress.length - 1];
            const first = progress[0];
            const totalChange = latest.weight - first.weight;
            const toGoal = latest.weight - latest.targetWeight;
            const avgEnergy = (progress.reduce((sum, p) => sum + p.energy, 0) / progress.length).toFixed(1);

            container.innerHTML = `
                <div style="background: linear-gradient(135deg, var(--success) 0%, #059669 100%); color: white; padding: 1.5rem; border-radius: 0.75rem; text-align: center;">
                    <div style="font-size: 2rem; margin-bottom: 0.5rem;">📉</div>
                    <div style="font-size: 1.75rem; font-weight: 900; margin-bottom: 0.25rem;">${Math.abs(totalChange).toFixed(1)} kg</div>
                    <div style="font-size: 0.875rem; opacity: 0.9;">Total Change</div>
                </div>
                <div style="background: linear-gradient(135deg, var(--secondary) 0%, #4F52C1 100%); color: white; padding: 1.5rem; border-radius: 0.75rem; text-align: center;">
                    <div style="font-size: 2rem; margin-bottom: 0.5rem;">🎯</div>
                    <div style="font-size: 1.75rem; font-weight: 900; margin-bottom: 0.25rem;">${Math.abs(toGoal).toFixed(1)} kg</div>
                    <div style="font-size: 0.875rem; opacity: 0.9;">To Goal</div>
                </div>
                <div style="background: linear-gradient(135deg, var(--warning) 0%, #D97706 100%); color: white; padding: 1.5rem; border-radius: 0.75rem; text-align: center;">
                    <div style="font-size: 2rem; margin-bottom: 0.5rem;">⚡</div>
                    <div style="font-size: 1.75rem; font-weight: 900; margin-bottom: 0.25rem;">${avgEnergy}/10</div>
                    <div style="font-size: 0.875rem; opacity: 0.9;">Avg Energy</div>
                </div>
            `;
        }

        // Initialize
        updateChart();
        displayHistory();
        updateStats();
    </script>

    <!-- Footer -->
    <footer style="text-align: center; padding: 3rem 2rem; background: rgba(30, 35, 55, 0.5); border-top: 1px solid var(--border-color); margin-top: 4rem;">
        <p style="font-size: 1.25rem; margin-bottom: 0.5rem; font-weight: 700; background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
            Made for Hackathon by Team BBPS Brij Vihar 🏆
        </p>
        <p style="color: var(--text-muted); font-size: 0.875rem;">© 2025 Mealora. All rights reserved.</p>
    </footer>
</body>
</html>


