<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Progress Tracker - Mealora</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="dynamic-responsive.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Background Orbs -->
    <div class="bg-orbs">
        <div class="orb orb-1"></div>
        <div class="orb orb-2"></div>
        <div class="orb orb-3"></div>
    </div>

    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <a href="index.html" class="nav-logo">
                <img src="logo.PNG" alt="Mealora" class="img-responsive" style="height: 45px; width: auto;">
                <span>Mealora</span>
            </a>
            <ul class="nav-links">
                <li><a href="index.html">Home</a></li>
                <li><a href="planner.html">Meal Planner</a></li>
                <li><a href="grocery.html">Grocery List</a></li>
                <li><a href="saved.html">Saved Plans</a></li>
                <li><a href="progress.html" class="active">Progress</a></li>
                <li><a href="recipes.html">Recipes</a></li>
            </ul>
            <button class="mobile-menu-toggle" onclick="toggleMobileMenu()">
                ‚ò∞
            </button>
        </div>
        <div class="mobile-nav" id="mobileNav">
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="planner.html">Meal Planner</a></li>
                <li><a href="grocery.html">Grocery List</a></li>
                <li><a href="saved.html">Saved Plans</a></li>
                <li><a href="progress.html" class="active">Progress</a></li>
                <li><a href="recipes.html">Recipes</a></li>
            </ul>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container">
        <div style="text-align: center; margin-bottom: 3rem;">
            <h1 style="font-size: 3rem; font-weight: 900; margin-bottom: 0.5rem;" class="gradient-text">
                üìà Progress Tracker
            </h1>
            <p style="font-size: 1.25rem; color: var(--gray-600); margin-bottom: 2rem;">
                Track your health journey over time
            </p>
            
            <!-- Demo Data Button -->
            <div style="margin-bottom: 2rem;">
                <button onclick="loadDemoData()" class="btn btn-secondary" style="padding: 1rem 2rem; font-size: 1.125rem; margin-right: 1rem;">
                    üéØ Load Demo Data
                </button>
                <button onclick="clearAllData()" class="btn" style="padding: 1rem 2rem; font-size: 1.125rem; background: var(--danger); color: white;">
                    üóëÔ∏è Clear All Data
                </button>
            </div>
        </div>

        <div style="display: grid; grid-template-columns: 1fr 2fr; gap: 2rem; margin-bottom: 2rem;">
            <!-- Left Panel - Log Progress -->
            <div class="glass" style="padding: 2rem; border-radius: 1.5rem;">
                <h2 style="font-size: 1.5rem; font-weight: 700; margin-bottom: 1.5rem; color: var(--gray-900);">
                    Log Your Progress
                </h2>
                
                <div style="margin-bottom: 1.5rem;">
                    <label style="display: block; font-weight: 700; color: var(--gray-700); margin-bottom: 0.5rem;">Current Weight (kg)</label>
                    <input type="number" id="weight" placeholder="e.g., 70" step="0.1"
                           style="width: 100%; padding: 0.75rem; border-radius: 0.75rem; border: 2px solid var(--gray-200); font-size: 1rem;">
                </div>

                <div style="margin-bottom: 1.5rem;">
                    <label style="display: block; font-weight: 700; color: var(--gray-700); margin-bottom: 0.5rem;">Target Weight (kg)</label>
                    <input type="number" id="targetWeight" placeholder="e.g., 65" step="0.1"
                           style="width: 100%; padding: 0.75rem; border-radius: 0.75rem; border: 2px solid var(--gray-200); font-size: 1rem;">
                </div>

                <div style="margin-bottom: 1.5rem;">
                    <label style="display: block; font-weight: 700; color: var(--gray-700); margin-bottom: 0.5rem;">Energy Level (1-10)</label>
                    <input type="range" id="energy" min="1" max="10" value="5"
                           oninput="document.getElementById('energyValue').textContent = this.value"
                           style="width: 100%;">
                    <div style="text-align: center; margin-top: 0.5rem; font-weight: 700; color: var(--primary); font-size: 1.25rem;">
                        <span id="energyValue">5</span>/10
                    </div>
                </div>

                <div style="margin-bottom: 2rem;">
                    <label style="display: block; font-weight: 700; color: var(--gray-700); margin-bottom: 0.5rem;">Notes (Optional)</label>
                    <textarea id="notes" placeholder="How are you feeling today?" rows="3"
                              style="width: 100%; padding: 0.75rem; border-radius: 0.75rem; border: 2px solid var(--gray-200); font-size: 1rem; resize: none;"></textarea>
                </div>

                <button onclick="logProgress()" class="btn btn-primary" style="width: 100%; justify-content: center; padding: 1rem;">
                    üíæ Save Progress
                </button>
            </div>

            <!-- Right Panel - Charts -->
            <div class="glass" style="padding: 2rem; border-radius: 1.5rem;">
                <h2 style="font-size: 1.5rem; font-weight: 700; margin-bottom: 1.5rem; color: var(--gray-900);">
                    Your Journey
                </h2>
                
                <div id="chartContainer" style="margin-bottom: 2rem;">
                    <canvas id="weightChart" style="max-height: 400px;"></canvas>
                </div>

                <div id="statsGrid" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem;">
                    <!-- Stats will be populated here -->
                </div>
            </div>
        </div>

        <!-- Progress History -->
        <div class="glass" style="padding: 2rem; border-radius: 1.5rem;">
            <h2 style="font-size: 1.5rem; font-weight: 700; margin-bottom: 1.5rem; color: var(--gray-900);">
                Recent Entries
            </h2>
            <div id="progressHistory"></div>
        </div>
    </div>

    <script src="app.js"></script>
    <script>
        setActivePage('progress.html');
        let weightChart = null;

        function logProgress() {
            const weight = document.getElementById('weight').value;
            const targetWeight = document.getElementById('targetWeight').value;
            const energy = document.getElementById('energy').value;
            const notes = document.getElementById('notes').value;

            if (!weight || !targetWeight) {
                showNotification('Please enter both current and target weight', 'error');
                return;
            }

            saveProgress({
                weight: parseFloat(weight),
                targetWeight: parseFloat(targetWeight),
                energy: parseInt(energy),
                notes
            });

            showNotification('‚úÖ Progress logged successfully!', 'success');
            
            // Clear form
            document.getElementById('weight').value = '';
            document.getElementById('notes').value = '';
            
            // Refresh display
            updateChart();
            displayHistory();
            updateStats();
        }

        function updateChart() {
            const progress = getProgress();
            
            // Ensure canvas element exists
            let chartContainer = document.getElementById('chartContainer');
            if (!document.getElementById('weightChart')) {
                chartContainer.innerHTML = '<canvas id="weightChart" style="max-height: 400px;"></canvas>';
            }
            
            if (progress.length === 0) {
                chartContainer.innerHTML = `
                    <div style="text-align: center; padding: 4rem;">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">üìä</div>
                        <p style="color: var(--gray-600);">Log your first entry to see the chart</p>
                    </div>
                `;
                return;
            }

            const ctx = document.getElementById('weightChart');
            
            if (weightChart) {
                weightChart.destroy();
            }

            const labels = progress.map(p => new Date(p.date).toLocaleDateString());
            const weights = progress.map(p => p.weight);
            const targets = progress.map(p => p.targetWeight);

            // Check if Chart.js is loaded
            if (typeof Chart === 'undefined') {
                chartContainer.innerHTML = `
                    <div style="text-align: center; padding: 4rem;">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">üìä</div>
                        <p style="color: var(--gray-600);">Chart.js is loading...</p>
                    </div>
                `;
                return;
            }

            weightChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Current Weight',
                        data: weights,
                        borderColor: 'rgb(0, 230, 160)',
                        backgroundColor: 'rgba(0, 230, 160, 0.1)',
                        tension: 0.4,
                        fill: true
                    }, {
                        label: 'Target Weight',
                        data: targets,
                        borderColor: 'rgb(99, 102, 241)',
                        borderDash: [5, 5],
                        tension: 0
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        title: {
                            display: true,
                            text: 'Weight Progress Over Time'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false
                        }
                    }
                }
            });
        }

        function displayHistory() {
            const progress = getProgress().reverse();
            const container = document.getElementById('progressHistory');
            
            if (progress.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 3rem; color: var(--gray-600);">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">üìã</div>
                        <p>No entries yet. Start logging your progress!</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = progress.slice(0, 5).map(entry => `
                <div style="background: white; padding: 1.5rem; border-radius: 0.75rem; margin-bottom: 1rem; border-left: 4px solid var(--primary);">
                    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                        <div>
                            <div style="font-weight: 700; color: var(--gray-900); font-size: 1.125rem; margin-bottom: 0.25rem;">
                                ${entry.weight} kg
                            </div>
                            <div style="font-size: 0.875rem; color: var(--gray-600);">
                                ${new Date(entry.date).toLocaleString()}
                            </div>
                        </div>
                        <div style="text-align: right;">
                            <div style="font-size: 0.75rem; color: var(--gray-600); text-transform: uppercase; margin-bottom: 0.25rem;">Energy</div>
                            <div style="font-weight: 700; color: var(--primary);">${entry.energy}/10</div>
                        </div>
                    </div>
                    ${entry.notes ? `<div style="color: var(--gray-600); font-size: 0.875rem; font-style: italic;">üìù ${entry.notes}</div>` : ''}
                </div>
            `).join('');
        }

        function updateStats() {
            const progress = getProgress();
            const container = document.getElementById('statsGrid');
            
            if (progress.length === 0) {
                container.innerHTML = '';
                return;
            }

            const latest = progress[progress.length - 1];
            const first = progress[0];
            const totalChange = latest.weight - first.weight;
            const toGoal = latest.weight - latest.targetWeight;
            const avgEnergy = (progress.reduce((sum, p) => sum + p.energy, 0) / progress.length).toFixed(1);

            container.innerHTML = `
                <div style="background: linear-gradient(135deg, var(--success) 0%, #059669 100%); color: white; padding: 1.5rem; border-radius: 0.75rem; text-align: center;">
                    <div style="font-size: 2rem; margin-bottom: 0.5rem;">üìâ</div>
                    <div style="font-size: 1.75rem; font-weight: 900; margin-bottom: 0.25rem;">${Math.abs(totalChange).toFixed(1)} kg</div>
                    <div style="font-size: 0.875rem; opacity: 0.9;">Total Change</div>
                </div>
                <div style="background: linear-gradient(135deg, var(--secondary) 0%, #4F52C1 100%); color: white; padding: 1.5rem; border-radius: 0.75rem; text-align: center;">
                    <div style="font-size: 2rem; margin-bottom: 0.5rem;">üéØ</div>
                    <div style="font-size: 1.75rem; font-weight: 900; margin-bottom: 0.25rem;">${Math.abs(toGoal).toFixed(1)} kg</div>
                    <div style="font-size: 0.875rem; opacity: 0.9;">To Goal</div>
                </div>
                <div style="background: linear-gradient(135deg, var(--warning) 0%, #D97706 100%); color: white; padding: 1.5rem; border-radius: 0.75rem; text-align: center;">
                    <div style="font-size: 2rem; margin-bottom: 0.5rem;">‚ö°</div>
                    <div style="font-size: 1.75rem; font-weight: 900; margin-bottom: 0.25rem;">${avgEnergy}/10</div>
                    <div style="font-size: 0.875rem; opacity: 0.9;">Avg Energy</div>
                </div>
            `;
        }

        // Demo data functions
        function loadDemoData() {
            const demoData = [
                {
                    id: Date.now() - 30 * 24 * 60 * 60 * 1000,
                    date: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000).toISOString(),
                    weight: 75.2,
                    targetWeight: 70.0,
                    energy: 6,
                    notes: "Started my vegetarian meal plan journey! Feeling motivated."
                },
                {
                    id: Date.now() - 28 * 24 * 60 * 60 * 1000,
                    date: new Date(Date.now() - 28 * 24 * 60 * 60 * 1000).toISOString(),
                    weight: 74.8,
                    targetWeight: 70.0,
                    energy: 7,
                    notes: "Great energy levels after following the meal plan. Dal and roti are amazing!"
                },
                {
                    id: Date.now() - 25 * 24 * 60 * 60 * 1000,
                    date: new Date(Date.now() - 25 * 24 * 60 * 60 * 1000).toISOString(),
                    weight: 74.1,
                    targetWeight: 70.0,
                    energy: 8,
                    notes: "Lost 0.7kg this week! The Indian vegetarian meals are so satisfying."
                },
                {
                    id: Date.now() - 22 * 24 * 60 * 60 * 1000,
                    date: new Date(Date.now() - 22 * 24 * 60 * 60 * 1000).toISOString(),
                    weight: 73.5,
                    targetWeight: 70.0,
                    energy: 8,
                    notes: "Consistent progress! Loving the variety of sabzi and dal combinations."
                },
                {
                    id: Date.now() - 19 * 24 * 60 * 60 * 1000,
                    date: new Date(Date.now() - 19 * 24 * 60 * 60 * 1000).toISOString(),
                    weight: 72.9,
                    targetWeight: 70.0,
                    energy: 9,
                    notes: "Feeling more energetic than ever! The meal plan is working perfectly."
                },
                {
                    id: Date.now() - 16 * 24 * 60 * 60 * 1000,
                    date: new Date(Date.now() - 16 * 24 * 60 * 60 * 1000).toISOString(),
                    weight: 72.2,
                    targetWeight: 70.0,
                    energy: 9,
                    notes: "Amazing results! Lost 3kg in 2 weeks. The vegetarian diet is incredible."
                },
                {
                    id: Date.now() - 13 * 24 * 60 * 60 * 1000,
                    date: new Date(Date.now() - 13 * 24 * 60 * 60 * 1000).toISOString(),
                    weight: 71.8,
                    targetWeight: 70.0,
                    energy: 8,
                    notes: "Steady progress continues. The meal variety keeps me motivated."
                },
                {
                    id: Date.now() - 10 * 24 * 60 * 60 * 1000,
                    date: new Date(Date.now() - 10 * 24 * 60 * 60 * 1000).toISOString(),
                    weight: 71.2,
                    targetWeight: 70.0,
                    energy: 9,
                    notes: "Only 1.2kg away from my goal! The Indian vegetarian meals are so nutritious."
                },
                {
                    id: Date.now() - 7 * 24 * 60 * 60 * 1000,
                    date: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString(),
                    weight: 70.8,
                    targetWeight: 70.0,
                    energy: 10,
                    notes: "Almost at my target! Feeling fantastic with high energy levels."
                },
                {
                    id: Date.now() - 4 * 24 * 60 * 60 * 1000,
                    date: new Date(Date.now() - 4 * 24 * 60 * 60 * 1000).toISOString(),
                    weight: 70.3,
                    targetWeight: 70.0,
                    energy: 10,
                    notes: "Just 0.3kg away from goal! The vegetarian meal plan has been life-changing."
                },
                {
                    id: Date.now() - 1 * 24 * 60 * 60 * 1000,
                    date: new Date(Date.now() - 1 * 24 * 60 * 60 * 1000).toISOString(),
                    weight: 70.1,
                    targetWeight: 70.0,
                    energy: 10,
                    notes: "Almost there! The consistent meal planning has made all the difference."
                }
            ];

            // Clear existing data and load demo data
            localStorage.setItem('progress', JSON.stringify(demoData));
            
            // Update the form with current values
            document.getElementById('weight').value = '70.1';
            document.getElementById('targetWeight').value = '70.0';
            document.getElementById('energy').value = '10';
            document.getElementById('energyValue').textContent = '10';
            document.getElementById('notes').value = 'Ready to maintain my healthy weight!';
            
            // Refresh all displays with delay
            setTimeout(() => {
                updateChart();
                displayHistory();
                updateStats();
            }, 200);
            
            showNotification('üéØ Demo data loaded successfully!', 'success');
        }

        function clearAllData() {
            if (confirm('Are you sure you want to clear all progress data? This action cannot be undone.')) {
                localStorage.removeItem('progress');
                
                // Clear form
                document.getElementById('weight').value = '';
                document.getElementById('targetWeight').value = '';
                document.getElementById('energy').value = '5';
                document.getElementById('energyValue').textContent = '5';
                document.getElementById('notes').value = '';
                
                // Refresh displays with delay
                setTimeout(() => {
                    updateChart();
                    displayHistory();
                    updateStats();
                }, 200);
                
                showNotification('üóëÔ∏è All data cleared!', 'success');
            }
        }

        // Initialize with delay to ensure Chart.js is loaded
        setTimeout(() => {
            updateChart();
            displayHistory();
            updateStats();
        }, 100);
    </script>

    <script src="device-detection.js"></script>
    <script>
        // Mobile menu toggle function
        function toggleMobileMenu() {
            const mobileNav = document.getElementById('mobileNav');
            mobileNav.classList.toggle('active');
        }
        
        // Close mobile menu when clicking outside
        document.addEventListener('click', function(event) {
            const mobileNav = document.getElementById('mobileNav');
            const mobileToggle = document.querySelector('.mobile-menu-toggle');
            
            if (!mobileNav.contains(event.target) && !mobileToggle.contains(event.target)) {
                mobileNav.classList.remove('active');
            }
        });
        
        // Close mobile menu when window is resized to desktop
        window.addEventListener('resize', function() {
            if (window.innerWidth > 768) {
                document.getElementById('mobileNav').classList.remove('active');
            }
        });
    </script>

    <!-- Footer -->
    <footer style="text-align: center; padding: 3rem 2rem; background: rgba(30, 35, 55, 0.5); border-top: 1px solid var(--border-color); margin-top: 4rem;">
        <p style="font-size: 1.25rem; margin-bottom: 0.5rem; font-weight: 700; background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">
            Made for Hackathon by Team BBPS Brij Vihar üèÜ
        </p>
        <p style="color: var(--text-muted); font-size: 0.875rem;">¬© 2025 Mealora. All rights reserved.</p>
    </footer>
</body>
</html>


